{{- /* Google AdSense 광고 컴포넌트 */ -}}
{{- if and site.Params.adsense.enabled site.Params.adsense.client }}

{{- $position := .position | default "content" -}}
{{- $slots := site.Params.adsense.slots | default (dict) -}}
{{- $slot := (index $slots $position) | default "" -}}
{{- if $slot }}

{{- /* 사이드바 광고 */ -}}
{{- if eq $position "sidebar" }}
<div class="ad-container sidebar-ad" data-ad-state="loading">
    <div class="ad-label">Advertisement</div>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="{{ site.Params.adsense.client }}"
         data-ad-slot="{{ $slot }}"
         data-ad-format="rectangle"
         data-full-width-responsive="true"></ins>
    <script>
      try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) {}
    </script>
</div>
{{- end }}

{{- /* 콘텐츠 내 광고 */ -}}
{{- if eq $position "content" }}
<div class="ad-container content-ad" data-ad-state="loading">
    <div class="ad-label">Advertisement</div>
    <ins class="adsbygoogle"
         style="display:block; text-align:center;"
         data-ad-layout="in-article"
         data-ad-format="fluid"
         data-ad-client="{{ site.Params.adsense.client }}"
         data-ad-slot="{{ $slot }}"></ins>
    <script>
      try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) {}
    </script>
</div>
{{- end }}

{{- /* 반응형 배너 광고 */ -}}
{{- if eq $position "banner" }}
<div class="ad-container banner-ad" data-ad-state="loading">
    <div class="ad-label">Advertisement</div>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="{{ site.Params.adsense.client }}"
         data-ad-slot="{{ $slot }}"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
      try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) {}
    </script>
</div>
{{- end }}

{{- /* 푸터 광고 */ -}}
{{- if eq $position "footer" }}
<div class="ad-container footer-ad" data-ad-state="loading">
    <div class="ad-label">Advertisement</div>
    <ins class="adsbygoogle"
         style="display:block"
         data-ad-client="{{ site.Params.adsense.client }}"
         data-ad-slot="{{ $slot }}"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
      try { (adsbygoogle = window.adsbygoogle || []).push({}); } catch (e) {}
    </script>
</div>
{{- end }}

<style>
.ad-container {
    margin: 0;
    padding: 0;
    background: transparent;
    border: 0;
    border-radius: 0;
    text-align: center;
}

.ad-label {
    font-size: 0.75rem;
    color: var(--text-muted, #718096);
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    display: none;
}

.ad-container[data-ad-state="filled"] .ad-label {
    display: block;
}

.sidebar-ad {
    max-width: 300px;
}

.content-ad {
    max-width: 728px;
}

.banner-ad {
    width: 100%;
    max-width: 970px;
}

.footer-ad {
    width: 100%;
    max-width: 728px;
}

.sidebar-ad[data-ad-state="filled"] { margin: 1rem 0; }
.content-ad[data-ad-state="filled"] { margin: 2rem auto; }
.banner-ad[data-ad-state="filled"] { margin: 1.75rem auto; }
.footer-ad[data-ad-state="filled"] { margin: 1.75rem auto; }

/* 다크 모드 지원 */
[data-theme="dark"] .ad-label {
    color: var(--text-muted, #a0aec0);
}

/* 반응형 디자인 */
@media (max-width: 768px) {
    .ad-container {
        margin: 1rem 0;
    }
    
    .banner-ad,
    .footer-ad {
        max-width: 100%;
    }
}
</style>

{{- end }}
{{- end }}
