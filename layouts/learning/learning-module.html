{{ define "main" }}
{{- $moduleKey := .Params.module_key }}
{{- $modulePosts := slice }}
{{- if $moduleKey }}
  {{- $modulePosts = where site.RegularPages "Params.module" $moduleKey }}
  {{- $orderedPosts := where $modulePosts "Params.study_order" "!=" nil }}
  {{- $orderedPosts = sort $orderedPosts "Params.study_order" }}
  {{- $unorderedPosts := where $modulePosts "Params.study_order" "==" nil }}
  {{- $unorderedPosts = sort $unorderedPosts "Date" "desc" }}
  {{- $modulePosts = $orderedPosts }}
  {{- range $unorderedPosts }}
    {{- $modulePosts = $modulePosts | append . }}
  {{- end }}
{{- end }}

<div class="learning-container">
  <header class="learning-hero">
    <div class="hero-content">
      <div class="hero-icon">ğŸ“˜</div>
      <h1 class="hero-title">{{ .Title }}</h1>
      <p class="hero-description">
        {{- with .Description -}}
          {{ . }}
        {{- else -}}
          {{ .Summary | plainify | truncate 140 }}
        {{- end -}}
      </p>
      <div class="hero-actions">
        <a class="hero-btn primary" href="/learning/timeline/">íƒ€ì„ë¼ì¸</a>
        <a class="hero-btn ghost" href="/learning/">Learning ë©”ì¸</a>
      </div>
      <div class="hero-badges">
        <span>ëª¨ë“ˆí˜• í•™ìŠµ</span>
        <span>ìë™ ì •ë ¬</span>
      </div>
    </div>
    <div class="hero-background">
      <div class="floating-element"></div>
      <div class="floating-element"></div>
      <div class="floating-element"></div>
    </div>
  </header>

  <section class="learning-overview">
    <div class="section-header">
      <h2>ğŸ§  ëª¨ë“ˆ ê°œìš”</h2>
      <div class="section-line"></div>
    </div>
    <article class="learning-rich-content">
      {{ .Content }}
    </article>
  </section>

  <section class="learning-timeline">
    <div class="section-header">
      <h2>ğŸ“‘ ì´ ëª¨ë“ˆì˜ í•™ìŠµ ë…¸íŠ¸</h2>
      <div class="section-line"></div>
    </div>
    {{- if gt (len $modulePosts) 0 }}
    <div class="learning-notes-grid">
      {{- range $modulePosts }}
      <article class="learning-note-card">
        <div class="note-card-header">
          {{- if .Params.topic }}<span class="note-topic-badge">{{ .Params.topic }}</span>{{- end }}
          <time datetime="{{ .Date.Format "2006-01-02" }}">{{ .Date | time.Format "01/02" }}</time>
        </div>
        <h3 class="note-card-title"><a href="{{ .Permalink }}">{{ .Title }}</a></h3>
        {{- if .Params.description }}
        <p class="note-card-summary">{{ .Params.description | truncate 120 }}</p>
        {{- else if .Summary }}
        <p class="note-card-summary">{{ .Summary | plainify | truncate 120 }}</p>
        {{- end }}
        {{- if .Params.tags }}
        <div class="note-card-tags">
          {{- range first 3 .Params.tags }}
          <span class="note-tag">{{ . }}</span>
          {{- end }}
        </div>
        {{- end }}
      </article>
      {{- end }}
    </div>
    {{- else }}
    <p class="empty-state">ì´ ëª¨ë“ˆì— ì—°ê²°ëœ ë…¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤. front matterì— <code>module: {{ $moduleKey }}</code>ë¥¼ ì¶”ê°€í•˜ì„¸ìš”.</p>
    {{- end }}
  </section>
</div>
<style>
.learning-container { max-width: 1200px; margin: 0 auto; padding: 2rem; padding-top: 5rem; min-height: 100vh; }
.learning-hero { position: relative; background: linear-gradient(135deg, #a8c0ff 0%, #9795f0 100%); border-radius: 24px; padding: 4rem 2rem; margin-bottom: 3rem; overflow: hidden; box-shadow: 0 20px 40px rgba(168, 192, 255, 0.15); }
.hero-content { position: relative; z-index: 2; text-align: center; color: white; }
.hero-icon { font-size: 3.5rem; margin-bottom: 0.8rem; display: inline-block; animation: heroFloat 4s ease-in-out infinite; }
.hero-title { font-size: 2.6rem; font-weight: 800; margin-bottom: 0.8rem; background: linear-gradient(135deg, #ffffff 0%, #f0f8ff 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
.hero-description { font-size: 1.1rem; opacity: 0.95; max-width: 720px; margin: 0 auto; line-height: 1.6; }
.hero-actions { display: flex; gap: 0.75rem; justify-content: center; margin: 1.6rem 0 0.5rem; flex-wrap: wrap; }
.hero-btn { display: inline-flex; align-items: center; gap: 0.5rem; padding: 0.85rem 1.4rem; border-radius: 14px; font-weight: 700; text-decoration: none; transition: all 0.2s ease; border: 1px solid rgba(255,255,255,0.3); color: white; background: rgba(255,255,255,0.12); box-shadow: 0 10px 30px rgba(0,0,0,0.08); }
.hero-btn.primary { background: white; color: #5b6cff; border-color: white; }
.hero-btn:hover { transform: translateY(-1px); box-shadow: 0 12px 30px rgba(0,0,0,0.12); }
.hero-badges { display: inline-flex; gap: 0.6rem; flex-wrap: wrap; justify-content: center; margin-top: 0.8rem; }
.hero-badges span { background: rgba(255,255,255,0.18); color: white; padding: 0.35rem 0.75rem; border-radius: 999px; font-size: 0.9rem; border: 1px solid rgba(255,255,255,0.25); }
.hero-background { position: absolute; inset: 0; z-index: 1; }
.floating-element { position: absolute; width: 80px; height: 80px; background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%); border-radius: 50%; animation: float 8s ease-in-out infinite; }
.floating-element:nth-child(1){ top:15%; left:15%; }
.floating-element:nth-child(2){ top:55%; right:20%; animation-delay:3s; }
.floating-element:nth-child(3){ bottom:25%; left:25%; animation-delay:6s; }
@keyframes float{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}@keyframes heroFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}
.section-header { display:flex; align-items:center; gap:1rem; margin-bottom:1.5rem; }
.section-header h2 { font-size:1.8rem; font-weight:800; margin:0; background: linear-gradient(135deg, #a8c0ff, #9795f0); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
.section-line { flex:1; height:2px; background: linear-gradient(90deg, #a8c0ff, transparent); border-radius:1px; }
.learning-overview { margin: 2rem 0 2rem; }
.learning-rich-content { background: var(--entry); border:1px solid var(--border); border-radius:16px; padding:1.5rem; box-shadow:0 8px 20px rgba(0,0,0,0.04); }
.learning-rich-content h2, .learning-rich-content h3 { margin-top:1.6rem; margin-bottom:0.8rem; }
.learning-rich-content p, .learning-rich-content ul, .learning-rich-content ol { color:var(--secondary); line-height:1.7; }
.learning-rich-content ul, .learning-rich-content ol { padding-left:1.1rem; margin:0.6rem 0 1rem; }
.learning-rich-content code { background: var(--code-bg); padding:0.1rem 0.35rem; border-radius:6px; }
.learning-rich-content pre { background: var(--code-bg); padding:1rem; border-radius:12px; overflow-x:auto; }
.learning-timeline { margin: 2rem 0 2rem; }
.learning-notes-grid { display:grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap:1.2rem; }
.learning-note-card { background: var(--entry); border-radius: 16px; padding: 1.5rem; box-shadow: 0 2px 10px rgba(0,0,0,0.04); border: 1px solid var(--border); transition: transform 0.2s ease, box-shadow 0.2s ease; }
.learning-note-card:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(168, 192, 255, 0.08); }
.note-card-header { display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem; }
.note-topic-badge { background: linear-gradient(135deg, #a8c0ff, #9795f0); color: white; padding: 0.3rem 0.8rem; border-radius: 12px; font-size: 0.8rem; font-weight: 600; }
.note-card-title { margin: 0 0 1rem; font-size: 1.15rem; font-weight: 700; }
.note-card-title a { color: var(--primary); text-decoration: none; }
.note-card-title a:hover { color: #6b7cff; }
.note-card-summary { color: var(--secondary); line-height: 1.6; margin: 0; }
.note-card-tags { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-top: 1rem; }
.note-tag { background: var(--code-bg); color: #a8c0ff; padding: 0.3rem 0.8rem; border-radius: 20px; font-size: 0.85rem; font-weight: 500; border: 1px solid rgba(168, 192, 255, 0.2); }
.empty-state { padding: 2rem 0; color: var(--secondary); }
@media (max-width: 768px){
  .learning-container{padding:1rem; padding-top:4rem;}
  .learning-hero{padding:3rem 1.5rem;}
  .hero-title{font-size:2.1rem;}
  .hero-description{font-size:1rem;}
  .hero-actions{flex-direction:column; align-items:center;}
  .hero-btn{width:100%; justify-content:center;}
}
</style>
{{ end }}
