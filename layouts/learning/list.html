{{- define "main" }}
{{- $curriculumOverview := site.GetPage "/learning/career/backend-curriculum-overview" }}
{{- $curriculumPages := where site.RegularPages "Params.topic" "Backend Roadmap" }}
{{- $curriculumPages = where $curriculumPages "Params.module_key" "!=" "overview" }}
{{- $curriculumPages = sort $curriculumPages "Weight" }}
<div class="learning-container">
    <!-- í•™ìŠµ íˆì–´ë¡œ ì„¹ì…˜ -->
    <header class="learning-hero">
        <div class="hero-content">
            <div class="hero-icon">ğŸ“š</div>
            <h1 class="hero-title">{{- .Title -}}</h1>
            <p class="hero-description">
                {{- with .Params.description -}}
                    {{ . }}
                {{- else -}}
                    ë°±ì—”ë“œ í•™ìŠµ ë¡œë“œë§µê³¼ í•™ìŠµ ë…¸íŠ¸ë¥¼ í•œ ê³³ì— ëª¨ì•˜ìŠµë‹ˆë‹¤.
                {{- end -}}
            </p>
            <div class="hero-actions">
                {{- with $curriculumOverview }}
                <a class="hero-btn primary" href="{{ .Permalink }}">ì»¤ë¦¬í˜ëŸ¼ ë³´ê¸°</a>
                {{- end }}
                {{- with first 1 (where $curriculumPages "Weight" 1) }}
                    {{- $p := index . 0 }}
                    <a class="hero-btn ghost" href="{{ $p.Permalink }}">ê¸°ì´ˆ ë‹¨ê³„</a>
                {{- end }}
                <a class="hero-btn ghost" href="/learning/timeline/">íƒ€ì„ë¼ì¸</a>
                <a class="hero-btn ghost" href="#learning-notes">ìµœê·¼ ë…¸íŠ¸</a>
            </div>
            <div class="hero-badges">
                <span>ì§€ì† ì—…ë°ì´íŠ¸</span>
                <span>ìŠ¤í”„ë§ Â· JPA Â· DB</span>
                <span>ìš´ì˜ Â· ëª¨ë‹ˆí„°ë§</span>
            </div>
        </div>
        <div class="hero-background">
            <div class="floating-element"></div>
            <div class="floating-element"></div>
            <div class="floating-element"></div>
        </div>
    </header>

    <!-- ë°±ì—”ë“œ ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ -->
    <section class="learning-curriculum">
        <div class="section-header">
            <h2>ğŸš€ ë°±ì—”ë“œ ì»¤ë¦¬í˜ëŸ¼</h2>
            <div class="section-line"></div>
        </div>
        {{- if gt (len $curriculumPages) 0 }}
            <div class="curriculum-grid">
                {{- range $idx, $page := $curriculumPages }}
                <article class="curriculum-card">
                    <div class="curriculum-step">STEP {{ add $idx 1 }}</div>
                    <h3 class="curriculum-title"><a href="{{ $page.Permalink }}">{{ $page.Title }}</a></h3>
                    <p class="curriculum-desc">
                        {{- with $page.Params.description -}}
                            {{ . }}
                        {{- else -}}
                            {{ $page.Summary | plainify | truncate 140 }}
                        {{- end -}}
                    </p>
                    <div class="curriculum-meta">
                        {{- if $page.Params.topic }}
                        <span class="curriculum-tag">{{ $page.Params.topic }}</span>
                        {{- end }}
                        <span class="curriculum-date">{{ $page.Date | time.Format "01/02" }}</span>
                    </div>
                </article>
                {{- end }}
            </div>
        {{- else }}
            <p class="empty-state">ì»¤ë¦¬í˜ëŸ¼ì„ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤.</p>
        {{- end }}
    </section>

    <!-- ê°œìš”/ê°€ì´ë“œ ì„¹ì…˜ -->
    {{- if .Content }}
    <section class="learning-overview" id="overview">
        <div class="section-header">
            <h2>ğŸ—ºï¸ í•™ìŠµ ê°€ì´ë“œ</h2>
            <div class="section-line"></div>
        </div>
        <article class="learning-rich-content">
            {{- .Content -}}
        </article>
    </section>
    {{- end }}

    <!-- ì£¼ì œë³„ í•™ìŠµ ì„¹ì…˜ (ë¦¬ìŠ¤íŠ¸ í˜•íƒœ) -->
    <section class="learning-topics">
        <div class="section-header compact">
            <h2>ğŸ“‚ í•™ìŠµ ì£¼ì œ</h2>
            <div class="section-line"></div>
        </div>

        {{- /* ëª¨ë“  learning í¬ìŠ¤íŠ¸ë¥¼ topicë³„ë¡œ ê·¸ë£¹í™” */ -}}
        {{- $learningPosts := where site.RegularPages "Section" "learning" }}
        {{- $learningPosts = where $learningPosts "Params.topic" "!=" nil }}

        {{- /* ìˆ˜ë™ìœ¼ë¡œ topicë³„ ê·¸ë£¹í™” */ -}}
        {{- $topicGroups := dict }}
        {{- range $learningPosts }}
            {{- $topic := .Params.topic }}
            {{- $existing := index $topicGroups $topic }}
            {{- if $existing }}
                {{- $topicGroups = merge $topicGroups (dict $topic ($existing | append .)) }}
            {{- else }}
                {{- $topicGroups = merge $topicGroups (dict $topic (slice .)) }}
            {{- end }}
        {{- end }}

        <div class="topics-list">
            {{- range $topic, $posts := $topicGroups }}
                {{- $firstPost := index $posts 0 }}
                {{- $latestPost := index (sort $posts "Date" "desc") 0 }}
                <div class="topic-card" onclick="filterByTopic('{{ $topic }}')">
                    <div class="topic-main">
                        <h3 class="topic-name">{{ $topic }}</h3>
                        <p class="topic-description">
                            {{- if $firstPost.Params.topic_description }}
                                {{ $firstPost.Params.topic_description }}
                            {{- else }}
                                í•™ìŠµ ë…¸íŠ¸ ëª¨ìŒ
                            {{- end }}
                        </p>
                    </div>
                    <div class="topic-meta">
                        <span class="note-count">{{ len $posts }}ê°œ</span>
                        <span class="last-update desktop-only">{{ $latestPost.Date | time.Format "01/02" }}</span>
                    </div>
                </div>
            {{- end }}

            {{- /* ì£¼ì œê°€ ì—†ëŠ” ê²½ìš° */ -}}
            {{- if eq (len $topicGroups) 0 }}
            <div class="empty-state">
                <div class="empty-icon">ğŸ“</div>
                <h3>ì•„ì§ í•™ìŠµ ë…¸íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤</h3>
                <p>ìƒˆë¡œìš´ í•™ìŠµ ë‚´ìš©ì„ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
            </div>
            {{- end }}
        </div>
    </section>

    <!-- ëª¨ë“  í•™ìŠµ ë…¸íŠ¸ ì„¹ì…˜ -->
    <section class="all-learning-notes" id="learning-notes">
        <div class="section-header">
            <h2>
                <span class="section-icon">â—</span>
                <span id="notes-title">ìµœê·¼ í•™ìŠµ ë…¸íŠ¸</span>
            </h2>
            <div class="section-line"></div>
            <button id="show-all-btn" class="show-all-btn" onclick="showAllNotes()" style="display: none;">
                ì „ì²´ ë³´ê¸°
            </button>
        </div>
        <div class="learning-notes-grid">
            {{- range $index, $post := $learningPosts.ByDate.Reverse }}
            <article class="learning-note-card {{ if ge $index 12 }}hidden-note{{- end }}" data-topic="{{ .Params.topic }}">
                <div class="note-card-header">
                    {{- if .Params.topic }}
                    <span class="note-topic-badge">{{ .Params.topic }}</span>
                    {{- end }}
                    <time datetime="{{ .Date.Format "2006-01-02" }}">
                        {{ .Date | time.Format (default "01/02" site.Params.DateFormat) }}
                    </time>
                </div>
                <h3 class="note-card-title">
                    <a href="{{ .Permalink }}">{{ .Title }}</a>
                </h3>
                {{- if .Params.description }}
                <p class="note-card-summary">{{ .Params.description | truncate 100 }}</p>
                {{- else if .Summary }}
                <p class="note-card-summary">{{ .Summary | truncate 100 }}</p>
                {{- end }}
                {{- if .Params.tags }}
                <div class="note-card-tags">
                    {{- range first 3 .Params.tags }}
                    <span class="note-tag">{{ . }}</span>
                    {{- end }}
                    {{- if gt (len .Params.tags) 3 }}
                    <span class="tag-more">+{{ sub (len .Params.tags) 3 }}</span>
                    {{- end }}
                </div>
                {{- end }}
            </article>
            {{- end }}
        </div>

        {{- if gt (len $learningPosts) 12 }}
        <div class="load-more-container">
            <button class="load-more-btn" onclick="loadMoreNotes()">
                ë” ë³´ê¸° <span id="remaining-count">({{ sub (len $learningPosts) 12 }}ê°œ ë‚¨ìŒ)</span>
            </button>
        </div>
        {{- end }}
    </section>
</div>

<style>
/* ì „ì²´ ì»¨í…Œì´ë„ˆ */
.learning-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    padding-top: 5rem;
    background: var(--theme);
    min-height: 100vh;
}

/* íˆì–´ë¡œ ì„¹ì…˜ */
.learning-hero {
    position: relative;
    background: linear-gradient(135deg, #a8c0ff 0%, #9795f0 100%);
    border-radius: 24px;
    padding: 4rem 2rem;
    margin-bottom: 4rem;
    overflow: hidden;
    box-shadow: 0 20px 40px rgba(168, 192, 255, 0.15);
}

.hero-content {
    position: relative;
    z-index: 2;
    text-align: center;
    color: white;
}

.hero-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    display: inline-block;
    animation: heroFloat 4s ease-in-out infinite;
    will-change: transform;
    transform: translateZ(0);
}

.hero-title {
    font-size: 3rem;
    font-weight: 700;
    margin-bottom: 1rem;
    text-shadow: 0 2px 20px rgba(0,0,0,0.1);
    background: linear-gradient(135deg, #ffffff 0%, #f0f8ff 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

.hero-description {
    font-size: 1.2rem;
    opacity: 0.95;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
}

.hero-actions {
    display: flex;
    gap: 0.75rem;
    justify-content: center;
    margin: 1.8rem 0 0.8rem;
    flex-wrap: wrap;
}

.hero-btn {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.85rem 1.4rem;
    border-radius: 14px;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.2s ease;
    border: 1px solid rgba(255,255,255,0.3);
    color: white;
    background: rgba(255,255,255,0.12);
    box-shadow: 0 10px 30px rgba(0,0,0,0.08);
}

.hero-btn.primary {
    background: white;
    color: #5b6cff;
    border-color: white;
}

.hero-btn:hover {
    transform: translateY(-1px);
    box-shadow: 0 12px 30px rgba(0,0,0,0.12);
}

.hero-badges {
    display: inline-flex;
    gap: 0.6rem;
    flex-wrap: wrap;
    justify-content: center;
    margin-top: 0.8rem;
}

.hero-badges span {
    background: rgba(255,255,255,0.18);
    color: white;
    padding: 0.35rem 0.75rem;
    border-radius: 999px;
    font-size: 0.9rem;
    border: 1px solid rgba(255,255,255,0.25);
}

.hero-background {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    z-index: 1;
}

.floating-element {
    position: absolute;
    width: 80px;
    height: 80px;
    background: radial-gradient(circle, rgba(255,255,255,0.08) 0%, transparent 70%);
    border-radius: 50%;
    animation: float 8s ease-in-out infinite;
    will-change: transform;
    transform: translateZ(0);
}

.floating-element:nth-child(1) {
    top: 15%;
    left: 15%;
    animation-delay: 0s;
}

.floating-element:nth-child(2) {
    top: 55%;
    right: 20%;
    animation-delay: 3s;
}

.floating-element:nth-child(3) {
    bottom: 25%;
    left: 25%;
    animation-delay: 6s;
}

@keyframes float {
    0%, 100% {
        transform: translateY(0px) translateZ(0);
    }
    50% {
        transform: translateY(-15px) translateZ(0);
    }
}

@keyframes heroFloat {
    0%, 100% {
        transform: translateY(0px) translateZ(0);
    }
    50% {
        transform: translateY(-8px) translateZ(0);
    }
}

/* ì»¤ë¦¬í˜ëŸ¼ ì„¹ì…˜ */
.learning-curriculum {
    margin: 3rem 0 2rem;
}

.curriculum-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
    gap: 1.2rem;
}

.curriculum-card {
    background: var(--entry);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.25rem;
    box-shadow: 0 6px 18px rgba(0,0,0,0.05);
    transition: all 0.25s ease;
    position: relative;
    overflow: hidden;
}

.curriculum-card::before {
    content: "";
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, rgba(168,192,255,0.12), rgba(151,149,240,0.1));
    opacity: 0;
    transition: opacity 0.25s ease;
    pointer-events: none;
}

.curriculum-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 28px rgba(168,192,255,0.18);
    border-color: #a8c0ff;
}

.curriculum-card:hover::before {
    opacity: 1;
}

.curriculum-step {
    font-size: 0.85rem;
    font-weight: 700;
    color: #8295ff;
    background: rgba(168,192,255,0.15);
    padding: 0.35rem 0.75rem;
    border-radius: 12px;
    display: inline-flex;
    align-items: center;
    gap: 0.35rem;
    margin-bottom: 0.6rem;
}

.curriculum-title {
    margin: 0 0 0.5rem;
    font-size: 1.1rem;
}

.curriculum-title a {
    color: var(--primary);
    text-decoration: none;
}

.curriculum-title a:hover {
    color: #6b7cff;
}

.curriculum-desc {
    color: var(--secondary);
    line-height: 1.5;
    font-size: 0.95rem;
    margin: 0 0 0.75rem;
}

.curriculum-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.85rem;
    color: var(--secondary);
}

.curriculum-tag {
    background: var(--code-bg);
    padding: 0.3rem 0.7rem;
    border-radius: 12px;
    color: #6b7cff;
    border: 1px solid rgba(168,192,255,0.25);
}

.curriculum-date {
    font-variant-numeric: tabular-nums;
}

/* ê°œìš” ì„¹ì…˜ (ë¦¬ì¹˜ ì½˜í…ì¸ ) */
.learning-overview {
    margin: 2.5rem 0 2rem;
}

.learning-rich-content {
    background: var(--entry);
    border: 1px solid var(--border);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 8px 20px rgba(0,0,0,0.04);
}

.learning-rich-content h2,
.learning-rich-content h3 {
    margin-top: 1.8rem;
    margin-bottom: 0.8rem;
}

.learning-rich-content p,
.learning-rich-content ul,
.learning-rich-content ol {
    color: var(--secondary);
    line-height: 1.7;
}

.learning-rich-content ul,
.learning-rich-content ol {
    padding-left: 1.1rem;
    margin: 0.6rem 0 1rem;
}

.learning-rich-content table {
    width: 100%;
    border-collapse: collapse;
    margin: 1.2rem 0;
    font-size: 0.95rem;
    overflow: hidden;
    border-radius: 12px;
}

.learning-rich-content table th,
.learning-rich-content table td {
    border: 1px solid var(--border);
    padding: 0.75rem 0.8rem;
    text-align: left;
}

.learning-rich-content table th {
    background: var(--code-bg);
    color: var(--primary);
}

.learning-rich-content table tr:nth-child(even) {
    background: rgba(168,192,255,0.06);
}

.learning-rich-content code {
    background: var(--code-bg);
    padding: 0.1rem 0.35rem;
    border-radius: 6px;
}

.learning-rich-content pre {
    background: var(--code-bg);
    padding: 1rem;
    border-radius: 12px;
    overflow-x: auto;
}

.learning-rich-content a {
    color: #6b7cff;
    text-decoration: underline;
    text-decoration-thickness: 2px;
    text-underline-offset: 4px;
}

/* ì„¹ì…˜ í—¤ë” */
.section-header {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
    position: relative;
}

.section-header h2 {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary);
    margin: 0;
    background: linear-gradient(135deg, #a8c0ff, #9795f0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.section-icon {
    background: linear-gradient(135deg, #a8c0ff, #9795f0);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-size: 1.5rem;
    animation: pulse 2s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.1); }
}

.section-line {
    flex: 1;
    height: 2px;
    background: linear-gradient(90deg, #a8c0ff, transparent);
    border-radius: 1px;
}

.show-all-btn {
    background: var(--secondary-color, #64748b);
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    border-radius: 12px;
    font-size: 0.9rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s ease;
    margin-left: auto;
}

.show-all-btn:hover {
    background: var(--secondary-hover, #475569);
    transform: translateY(-1px);
}

/* ì£¼ì œ ë¦¬ìŠ¤íŠ¸ */
.topics-list {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
    gap: 0.75rem;
    margin-bottom: 2rem;
}

.topic-card {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--entry);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 0.85rem 1rem;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 1px 6px rgba(0,0,0,0.04);
}

.topic-card:hover {
    border-color: rgba(168,192,255,0.55);
    box-shadow: 0 6px 18px rgba(168, 192, 255, 0.10);
}

.topic-main {
    display: flex;
    flex-direction: column;
    gap: 0.15rem;
    min-width: 0;
}

.topic-name {
    margin: 0;
    font-size: 1rem;
    font-weight: 700;
    color: var(--primary);
}

.topic-description {
    font-size: 0.85rem;
    color: var(--secondary);
    margin: 0;
    line-height: 1.35;
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
}

.topic-meta {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    flex: 0 0 auto;
    font-variant-numeric: tabular-nums;
}

.note-count {
    font-size: 0.9rem;
    font-weight: 700;
    color: var(--primary);
}

.last-update {
    font-size: 0.8rem;
    color: var(--secondary);
}

/* í•™ìŠµ ë…¸íŠ¸ ê·¸ë¦¬ë“œ */
.learning-notes-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 2rem;
}

.learning-note-card {
    background: var(--entry);
    border-radius: 16px;
    padding: 1.5rem;
    box-shadow: 0 2px 10px rgba(0,0,0,0.04);
    border: 1px solid var(--border);
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    will-change: transform;
}

.hidden-note {
    display: none;
}

.learning-note-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(168, 192, 255, 0.08);
}

.note-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.note-topic-badge {
    background: linear-gradient(135deg, #a8c0ff, #9795f0);
    color: white;
    padding: 0.3rem 0.8rem;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 600;
}

.note-card-header time {
    color: var(--secondary);
    font-size: 0.9rem;
}

.note-card-title {
    margin: 0 0 1rem;
    font-size: 1.2rem;
    font-weight: 600;
}

.note-card-title a {
    color: var(--primary);
    text-decoration: none;
    transition: color 0.3s ease;
}

.note-card-title a:hover {
    color: #a8c0ff;
}

/* í•™ìŠµ ë…¸íŠ¸ ì¹´ë“œì˜ ëª¨ë“  ì½˜í…ì¸  í¬ê¸° ì œí•œ (ì œëª© ì œì™¸) */
.learning-note-card * {
    font-size: 0.95rem !important;
    font-weight: normal !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    line-height: 1.6 !important;
}

/* ì¹´ë“œ ì œëª©ë§Œ ì›ë˜ í¬ê¸° ìœ ì§€ */
.learning-note-card .note-card-title,
.learning-note-card .note-card-title * {
    font-size: 1.2rem !important;
    font-weight: 600 !important;
    margin: 0 0 1rem !important;
}

/* ì¹´ë“œ í—¤ë” ì›ë˜ í¬ê¸° ìœ ì§€ */
.learning-note-card .note-card-header {
    display: flex !important;
    justify-content: space-between !important;
    align-items: center !important;
    margin-bottom: 1rem !important;
}

/* ì£¼ì œ ë°°ì§€ì™€ ë‚ ì§œ ì›ë˜ í¬ê¸° ìœ ì§€ */
.learning-note-card .note-topic-badge {
    font-size: 0.8rem !important;
    font-weight: 600 !important;
    padding: 0.3rem 0.8rem !important;
    border-radius: 12px !important;
}

.learning-note-card time {
    font-size: 0.9rem !important;
}

/* íƒœê·¸ ì»¨í…Œì´ë„ˆ */
.learning-note-card .note-card-tags {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 0.5rem !important;
    margin-top: 1rem !important;
}

/* íƒœê·¸ ì›ë˜ í¬ê¸° ìœ ì§€ */
.learning-note-card .note-tag,
.learning-note-card .tag-more {
    font-size: 0.85rem !important;
    font-weight: 500 !important;
    padding: 0.3rem 0.8rem !important;
    border-radius: 20px !important;
    border: 1px solid rgba(168, 192, 255, 0.2) !important;
}

/* ì¹´ë“œ ìì²´ ìŠ¤íƒ€ì¼ ë³µì› */
.learning-note-card {
    background: var(--entry) !important;
    border-radius: 16px !important;
    padding: 1.5rem !important;
    box-shadow: 0 2px 10px rgba(0,0,0,0.04) !important;
    border: 1px solid var(--border) !important;
}

/* ì£¼ì œ ì¹´ë“œì˜ ì„¤ëª… ì˜ì—­ */
.topic-card .topic-description * {
    font-size: 0.95rem !important;
    font-weight: normal !important;
    margin: 0 !important;
    padding: 0 !important;
    border: none !important;
    line-height: 1.6 !important;
}

.note-card-summary {
    color: var(--secondary);
    line-height: 1.6;
    margin-bottom: 1rem;
}

.note-card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
    margin-top: 1rem;
}

.note-tag {
    background: var(--code-bg);
    color: #a8c0ff;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    border: 1px solid rgba(168, 192, 255, 0.2);
}

.tag-more {
    background: #a8c0ff;
    color: white;
    padding: 0.3rem 0.8rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
    align-content: center;
}

/* ë” ë³´ê¸° ë²„íŠ¼ */
.load-more-container {
    text-align: center;
    margin: 2rem 0;
}

.load-more-btn {
    background: linear-gradient(135deg, #a8c0ff, #9795f0);
    color: white;
    border: none;
    padding: 1rem 2.5rem;
    border-radius: 24px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(168, 192, 255, 0.3);
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

.load-more-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 25px rgba(168, 192, 255, 0.4);
}

.load-more-btn:active {
    transform: translateY(0);
}

#remaining-count {
    opacity: 0.9;
    font-size: 0.9rem;
    font-weight: 500;
}

/* ë¹ˆ ìƒíƒœ */
.empty-state {
    grid-column: 1 / -1;
    text-align: center;
    padding: 4rem 2rem;
}

.empty-icon {
    font-size: 4rem;
    margin-bottom: 1rem;
    opacity: 0.5;
}

.empty-state h3 {
    color: var(--primary);
    margin-bottom: 0.5rem;
}

.empty-state p {
    color: var(--secondary);
}

/* ë°˜ì‘í˜• ë””ìì¸ */
@media (max-width: 768px) {
    .learning-container {
        padding: 1rem;
        padding-top: 4rem;
    }

    .learning-hero {
        padding: 3rem 1.5rem;
        margin-bottom: 3rem;
    }

    .hero-title {
        font-size: 2.2rem;
    }

    .hero-description {
        font-size: 1rem;
    }

    .hero-actions {
        flex-direction: column;
        align-items: center;
    }

    .hero-btn {
        width: 100%;
        justify-content: center;
    }

    .desktop-only {
        display: none;
    }

    .topic-card {
        padding: 1rem;
    }

    .topic-name {
        font-size: 1.1rem;
    }

    .topic-description {
        font-size: 0.85rem;
    }

    .note-count {
        font-size: 1rem;
    }

    .learning-notes-grid {
        grid-template-columns: 1fr;
    }

    .section-header h2 {
        font-size: 1.6rem;
    }

    .floating-element {
        animation-duration: 12s;
    }

    .hero-icon {
        animation-duration: 6s;
    }
}

@media (max-width: 480px) {
    .hero-title {
        font-size: 1.8rem;
    }

    .hero-icon {
        font-size: 3rem;
        animation: none;
    }

    .floating-element {
        display: none;
    }

    .topic-card {
        padding: 0.9rem;
    }

    .topic-name {
        font-size: 1rem;
    }

    .topic-description {
        display: none;
    }

    .note-count {
        font-size: 0.9rem;
    }
}

/* ë‹¤í¬ ëª¨ë“œ ì§€ì› */
[data-theme="dark"] .learning-hero {
    background: linear-gradient(135deg, #8ba3d7 0%, #7d7bc8 100%);
}

[data-theme="dark"] .topic-card {
    background: var(--entry);
    border-color: var(--border);
}

[data-theme="dark"] .topic-card:hover {
    background: rgba(168, 192, 255, 0.08);
    border-color: #a8c0ff;
}

[data-theme="dark"] .learning-note-card {
    background: var(--entry);
    border-color: var(--border);
}

[data-theme="dark"] .note-tag {
    background: rgba(168, 192, 255, 0.15);
    border-color: rgba(168, 192, 255, 0.3);
    color: #b8ccff;
}
</style>

<script>
let currentlyShowingAll = false;

function filterByTopic(topic) {
    const allNotes = document.querySelectorAll('.learning-note-card');
    const notesTitle = document.getElementById('notes-title');
    const showAllBtn = document.getElementById('show-all-btn');
    const loadMoreContainer = document.querySelector('.load-more-container');
    const notesSection = document.getElementById('learning-notes');

    let visibleCount = 0;

    allNotes.forEach(note => {
        const noteTopic = note.getAttribute('data-topic');
        note.classList.remove('hidden-note');
        if (noteTopic === topic) {
            note.style.display = 'block';
            visibleCount++;
        } else {
            note.style.display = 'none';
        }
    });

    notesTitle.innerHTML = `${topic} í•™ìŠµ ë…¸íŠ¸ <span style="color: var(--secondary); font-size: 0.8em;">(${visibleCount}ê°œ)</span>`;
    showAllBtn.style.display = 'block';

    // í•„í„°ë§ ì‹œ "ë” ë³´ê¸°" ë²„íŠ¼ ìˆ¨ê¹€
    if (loadMoreContainer) {
        loadMoreContainer.style.display = 'none';
    }

    currentlyShowingAll = true;

    // ìŠ¤í¬ë¡¤
    notesSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
}

function showAllNotes() {
    const allNotes = document.querySelectorAll('.learning-note-card');
    const notesTitle = document.getElementById('notes-title');
    const showAllBtn = document.getElementById('show-all-btn');
    const loadMoreContainer = document.querySelector('.load-more-container');

    // ì²˜ìŒ 12ê°œë§Œ ë³´ì´ë„ë¡ ì´ˆê¸°í™”
    allNotes.forEach((note, index) => {
        note.style.display = 'block';
        if (index >= 12) {
            note.classList.add('hidden-note');
        } else {
            note.classList.remove('hidden-note');
        }
    });

    notesTitle.textContent = 'ìµœê·¼ í•™ìŠµ ë…¸íŠ¸';
    showAllBtn.style.display = 'none';

    // "ë” ë³´ê¸°" ë²„íŠ¼ ë‹¤ì‹œ í‘œì‹œ
    if (loadMoreContainer && allNotes.length > 12) {
        loadMoreContainer.style.display = 'block';
        updateRemainingCount();
    }

    currentlyShowingAll = false;
}

function loadMoreNotes() {
    const hiddenNotes = document.querySelectorAll('.learning-note-card.hidden-note');
    const loadMoreBtn = document.querySelector('.load-more-btn');
    const loadMoreContainer = document.querySelector('.load-more-container');
    const notesTitle = document.getElementById('notes-title');

    // í•œ ë²ˆì— 12ê°œì”© ë” ë³´ì—¬ì£¼ê¸°
    let count = 0;
    hiddenNotes.forEach(note => {
        if (count < 12) {
            note.classList.remove('hidden-note');
            count++;
        }
    });

    // ë‚¨ì€ ê°œìˆ˜ ì—…ë°ì´íŠ¸
    const remainingCount = document.querySelectorAll('.learning-note-card.hidden-note').length;

    if (remainingCount === 0) {
        // ëª¨ë‘ í‘œì‹œë˜ë©´ ë²„íŠ¼ ìˆ¨ê¸°ê³  ì œëª© ë³€ê²½
        loadMoreContainer.style.display = 'none';
        notesTitle.textContent = 'ëª¨ë“  í•™ìŠµ ë…¸íŠ¸';
        currentlyShowingAll = true;
    } else {
        updateRemainingCount();
    }
}

function updateRemainingCount() {
    const remainingCount = document.querySelectorAll('.learning-note-card.hidden-note').length;
    const remainingCountSpan = document.getElementById('remaining-count');
    if (remainingCountSpan) {
        remainingCountSpan.textContent = `(${remainingCount}ê°œ ë‚¨ìŒ)`;
    }
}
</script>

{{- end }}
