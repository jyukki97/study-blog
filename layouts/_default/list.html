{{ define "main" }}
<main class="main">
    {{ if .Site.Params.cover.enabled }}
        {{ partial "cover.html" . }}
    {{ end }}
    {{ if .Site.Params.ProfileMode }}
        {{ partial "profile.html" . }}
    {{ end }}

    <section class="list-page">
        {{ if and .IsHome .Site.Params.showTagsOnHome }}
            <div class="tags-section">
                <div class="tags-header">
                    <h2>Tags</h2>
                    <a href="{{ "tags" | absURL }}" class="more-link">More â†’</a>
                </div>
                <div class="all-tags">
                    {{ $tags := .Site.Taxonomies.tags }}
                    {{ $tagsList := slice }}
                    {{ range $tagName, $tagData := $tags }}
                        {{ if gt (len $tagData) 0 }}
                            {{ $tagsList = $tagsList | append (dict "name" $tagName "data" $tagData "count" (len $tagData)) }}
                        {{ end }}
                    {{ end }}
                    {{ $sortedTags := sort $tagsList "count" "desc" }}
                    {{ range $index, $tag := $sortedTags }}
                        <a href="#" class="tag-link" data-index="{{ $index }}" data-tag="{{ .name }}" onclick="filterPostsByTag('{{ .name }}', this); return false;">
                            {{ .name }} <span class="tag-count">({{ .count }})</span>
                        </a>
                    {{ end }}
                    <a href="#" class="tag-link show-all-posts" onclick="showAllPosts(this); return false;" style="display: none;">
                        ì „ì²´ ë³´ê¸°
                    </a>
                    {{ if gt (len $sortedTags) 18 }}
                        <a href="{{ "tags" | absURL }}" class="tag-link more-tags" style="display: none;">
                            <span class="more-text"></span>
                        </a>
                    {{ end }}
                </div>
            </div>
        {{ end }}

        <div class="post-header">
            <h2>Posts</h2>
            {{ if and .IsHome }}
            <a href="{{ "posts" | absURL }}" class="more-link">More â†’</a>
            {{ end }}
        </div>

        <div class="post-grid">
            {{ $pages := .Pages }}
            {{ if .IsHome }}
                {{ $pages = where .Site.RegularPages "Section" "posts" }}
            {{ end }}
            {{ $paginator := .Paginate $pages }}
            {{ range $paginator.Pages }}
                <article class="post-entry" 
                         data-tags="{{ if .Params.tags }}{{ delimit .Params.tags "," }}{{ end }}"
                         data-project="{{ if .Params.project }}{{ .Params.project }}{{ end }}">
                    {{ if .Params.cover.image }}
                        <a class="post-cover" href="{{ .Permalink }}">
                            <img src="{{ .Params.cover.image | absURL }}" alt="{{ .Title }}">
                        </a>
                    {{ else }}
                        <a class="post-cover no-image" href="{{ .Permalink }}">
                            <div class="title-overlay">
                                <h2>{{ .Title }}</h2>
                            </div>
                        </a>
                    {{ end }}
                    <div class="post-content">
                        {{ if .Params.tags }}
                            <div class="post-tags-container">
                                <div class="post-tags" id="post-tags-{{ .Permalink | urlize }}">
                                    {{ range $index, $tag := .Params.tags }}
                                        <a href="{{ "tags/" | absURL }}{{ . | urlize }}" class="post-tag">{{ . }}</a>
                                    {{ end }}
                                </div>
                            </div>
                        {{ end }}
                        <h2 class="post-title">
                            <a href="{{ .Permalink }}">{{ .Title }}</a>
                        </h2>
                        <div class="post-meta">
                            <span title='{{ .Date }}'>{{ .Date | time.Format (default "January 2, 2006" site.Params.DateFormat) }}</span>
                        </div>
                        {{ if .Description }}
                            <p class="post-summary">{{ .Description }}</p>
                        {{ end }}
                    </div>
                </article>
            {{ end }}
        </div>

        {{- /* í¬ìŠ¤íŠ¸ ë¦¬ìŠ¤íŠ¸ í›„ ê´‘ê³  */ -}}
        {{- partial "ads.html" (dict "position" "banner") }}

        {{ if gt $paginator.TotalPages 1 }}
            <nav class="pagination">
                {{ if $paginator.HasPrev }}
                    <a class="prev" href="{{ $paginator.Prev.URL | absURL }}">â† {{ i18n "prev_page" }}</a>
                {{ end }}
                {{ if $paginator.HasNext }}
                    <a class="next" href="{{ $paginator.Next.URL | absURL }}">{{ i18n "next_page" }} â†’</a>
                {{ end }}
            </nav>
        {{ end }}
    </section>
</main>

<style>
.post-header {
    margin: 2rem 0;
    padding: 0 1rem;
    display: flex;
    align-items: center;
}

.post-header h2 {
    margin: 0;
    font-size: 1.8rem;
    color: var(--primary-color, #b19cd9);
    background: linear-gradient(135deg, var(--primary-color, #b19cd9), var(--primary-dark, #8a67b8));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 700;
}

.post-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
}

.post-entry {
    background: var(--bg-primary, #ffffff);
    border: 1px solid var(--border-color, #e2e8f0);
    border-radius: 12px;
    overflow: hidden;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px var(--shadow-light, rgba(0, 0, 0, 0.1));
}

.post-entry:hover {
    transform: translateY(-8px);
    box-shadow: 0 8px 24px var(--shadow-medium, rgba(0, 0, 0, 0.15));
    border-color: var(--primary-color, #b19cd9);
}

.post-cover {
    display: block;
    width: 100%;
    height: 200px;
    overflow: hidden;
    position: relative;
}

.post-cover img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s;
}

.post-entry:hover .post-cover img {
    transform: scale(1.05);
}

.no-image {
    background: linear-gradient(45deg, #b19cd9, #8a6cb3);
}

.title-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1rem;
    text-align: center;
}

.title-overlay h2 {
    color: white;
    margin: 0;
    font-size: 1.5rem;
    text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
}

.post-content {
    padding: 1.5rem;
}

.post-tags-container {
    margin-bottom: 0.5rem;
    overflow: visible; /* ì˜¤ë²„í”Œë¡œìš° ë°©ì§€ */
}

.post-tags {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
    overflow: hidden;
    transition: max-height 0.3s ease;
    padding: 0.5rem 0;
    line-height: 1.8;
}

.post-tags.expanded {
    max-height: none;
}

.all-tags {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.show-more-tags {
    background: none;
    border: none;
    color: var(--primary-color, #b19cd9);
    cursor: pointer;
    font-size: 0.9rem;
    padding: 0.5rem 1rem;
    transition: all 0.15s ease;
    border-radius: 20px;
    margin: 0.1rem 0 0 0;
    border: 1px solid transparent;
    min-height: 2rem; /* ìµœì†Œ ë†’ì´ ê°ì†Œ */
    display: inline-flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
    min-height: 2rem;
    box-sizing: border-box;
}

.show-more-tags:hover {
    color: white;
    background: var(--primary-color, #b19cd9);
    border: 1px solid var(--primary-color, #b19cd9);
    border-radius: 16px !important;
    transform: translateY(-1px);
    box-shadow: 0 2px 8px rgba(177, 156, 217, 0.3);
}

.post-title {
    margin: 0 0 1rem;
}

.post-title a {
    color: var(--primary);
    text-decoration: none;
}

.post-summary {
    color: var(--secondary);
    margin-bottom: 1rem;
    line-height: 1.6;
}

.post-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    color: var(--secondary);
    font-size: 0.9rem;
}

.tags-section {
    margin: 2rem 0;
    padding: 0 1rem;
}

.tags-header {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
}

.tags-header h2 {
    margin: 0;
    font-size: 1.8rem;
    color: var(--primary-color, #b19cd9);
    background: linear-gradient(135deg, var(--primary-color, #b19cd9), var(--primary-dark, #8a67b8));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    font-weight: 700;
}

.post-tag,
.tag-link,
.more-link {
    color: var(--primary-color, #b19cd9);
    text-decoration: none;
    padding: 0.5rem 1rem; /* íŒ¨ë”© ì¡°ì • */
    border-radius: 20px !important;
    background: var(--bg-secondary, #f8f9fa);
    transition: all 0.15s ease;
    font-size: 0.9rem;
    border: 1px solid var(--primary-color, #b19cd9);
    position: relative;
    overflow: visible;
    white-space: nowrap;
    flex-shrink: 0;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    margin: 0.1rem 0; /* ë§ˆì§„ ê°ì†Œ */
    min-height: 2rem; /* ìµœì†Œ ë†’ì´ ê°ì†Œ */
    box-sizing: border-box;
}

.post-tag::before,
.tag-link::before,
.more-link::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0%;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--primary-color, #b19cd9), var(--primary-hover, #9a7bc8));
    transition: left 0.3s ease;
    z-index: -1;
    border-radius: 20px; /* ::before ìš”ì†Œë„ ë‘¥ê¸€ê²Œ */
}

.post-tag:hover,
.tag-link:hover,
.more-link:hover {
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(177, 156, 217, 0.3);
    border-radius: 20px !important; /* hover ì‹œì—ë„ ë‘¥ê·¼ ëª¨ì„œë¦¬ ìœ ì§€ */
}

.post-tag:hover::before,
.tag-link:hover::before,
.more-link:hover::before {
    left: 0;
}

/* ë”ë³´ê¸° ë§í¬ íŠ¹ë³„ ìŠ¤íƒ€ì¼ */
.more-link {
    font-size: 0.9rem;
    padding: 0.3rem 0.8rem;
    background: transparent !important;
    border: none !important;
    color: var(--primary-color, #b19cd9) !important;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.15s ease;
}

.more-link:hover {
    color: var(--primary-hover, #9a7bc8) !important;
    transform: translateX(4px);
    background: transparent !important;
    box-shadow: none !important;
}

.more-link::before {
    display: none;
}

/* ë”ë³´ê¸° íƒœê·¸ ìŠ¤íƒ€ì¼ */
.more-tags {
    background: var(--primary-color, #b19cd9) !important;
    color: white !important;
    border: 1px solid var(--primary-color, #b19cd9) !important;
}

.more-tags:hover {
    background: var(--primary-hover, #9a7bc8) !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(177, 156, 217, 0.4);
}

/* í™œì„±í™”ëœ íƒœê·¸ ìŠ¤íƒ€ì¼ */
.tag-link.active {
    background: var(--primary-color, #b19cd9) !important;
    color: white !important;
    border: 1px solid var(--primary-color, #b19cd9) !important;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(177, 156, 217, 0.4);
}

/* ì „ì²´ ë³´ê¸° íƒœê·¸ ìŠ¤íƒ€ì¼ */
.show-all-posts {
    background: var(--secondary-color, #64748b) !important;
    color: white !important;
}

.show-all-posts:hover {
    background: var(--secondary-hover, #475569) !important;
}

/* íƒœê·¸ ê°œìˆ˜ ìŠ¤íƒ€ì¼ */
.tag-count {
    opacity: 0.7;
    font-size: 0.8em;
    margin-left: 0.2rem;
}

.pagination {
    display: flex;
    justify-content: center;
    gap: 1rem;
    margin-top: 2rem;
}

.pagination a {
    color: var(--primary-color, #b19cd9);
    text-decoration: none;
    border-radius: 24px !important; /* í˜ì´ì§€ë„¤ì´ì…˜ì€ ë” ë‘¥ê¸€ê²Œ */
    background: var(--bg-secondary, #f8f9fa);
    transition: all 0.3s ease;
    border: 2px solid var(--primary-color, #b19cd9);
    font-weight: 500;
    position: relative;
    overflow: hidden;
}

.pagination a::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, var(--primary-color, #b19cd9), var(--primary-hover, #9a7bc8));
    transition: left 0.3s ease;
    z-index: -1;
    border-radius: 24px;
}

.pagination a:hover {
    color: white;
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(177, 156, 217, 0.4);
    border-radius: 24px !important;
}

.pagination a:hover::before {
    left: 0;
}

/* ë‹¤í¬ ëª¨ë“œ ì§€ì› */
[data-theme="dark"] .post-entry {
    background: var(--bg-secondary, #2d3748);
    border-color: var(--border-color, #4a5568);
}

[data-theme="dark"] .post-tag,
[data-theme="dark"] .tag-link,
[data-theme="dark"] .more-link,
[data-theme="dark"] .pagination a {
    background: var(--bg-tertiary, #4a5568);
    border-color: var(--primary-color, #b19cd9);
    color: var(--primary-color, #b19cd9);
}

[data-theme="dark"] .post-tag:hover,
[data-theme="dark"] .tag-link:hover,
[data-theme="dark"] .more-link:hover,
[data-theme="dark"] .pagination a:hover {
    color: white;
    border-radius: 20px !important; /* ë‹¤í¬ëª¨ë“œì—ì„œë„ ë‘¥ê¸€ë¦° ëª¨ì„œë¦¬ ìœ ì§€ */
}

[data-theme="dark"] .pagination a:hover {
    border-radius: 24px !important; /* í˜ì´ì§€ë„¤ì´ì…˜ì€ ë” ë‘¥ê¸€ê²Œ */
}

[data-theme="dark"] .show-more-tags {
    color: var(--primary-color, #b19cd9);
}

[data-theme="dark"] .show-more-tags:hover {
    color: white;
    background: var(--primary-color, #b19cd9);
    border: 1px solid var(--primary-color, #b19cd9);
    border-radius: 16px !important;
}

[data-theme="dark"] .more-tags {
    background: var(--primary-color, #b19cd9) !important;
    color: white !important;
    border: 1px solid var(--primary-color, #b19cd9) !important;
}

[data-theme="dark"] .more-tags:hover {
    background: var(--primary-hover, #9a7bc8) !important;
}

[data-theme="dark"] .tag-link.active {
    background: var(--primary-color, #b19cd9) !important;
    color: white !important;
    border: 1px solid var(--primary-color, #b19cd9) !important;
}

[data-theme="dark"] .show-all-posts {
    background: var(--secondary-color, #64748b) !important;
    color: white !important;
    border: 1px solid var(--secondary-color, #64748b) !important;
}

[data-theme="dark"] .show-all-posts:hover {
    background: var(--secondary-hover, #475569) !important;
}

/* ëª¨ë°”ì¼ ë°˜ì‘í˜• */
@media (max-width: 768px) {
    .post-grid {
        grid-template-columns: 1fr;
        gap: 1.5rem;
    }
    
    .post-header,
    .tags-section {
        padding: 0 0.5rem;
    }

    .post-header h2,
    .tags-header h2 {
        font-size: 1.5rem;
    }
    
    .post-tags,
    .all-tags {
        gap: 0.4rem; /* ëª¨ë°”ì¼ì—ì„œ ë” ì‘ì€ ê°„ê²© */
    }
    
    .post-tag,
    .tag-link,
    .more-link {
        font-size: 0.8rem;
        padding: 0.5rem 0.8rem; /* íŒ¨ë”© ì¦ê°€ */
        border-radius: 20px !important; /* ëª¨ë°”ì¼ì—ì„œëŠ” ëœ ë‘¥ê¸€ê²Œ */
        margin: 0.2rem 0; /* ìƒí•˜ ë§ˆì§„ ì¶”ê°€ */
        min-height: 2rem; /* ìµœì†Œ ë†’ì´ ì„¤ì • */
    }
    
    .pagination a {
        border-radius: 20px !important; /* ëª¨ë°”ì¼ì—ì„œ í˜ì´ì§€ë„¤ì´ì…˜ë„ ëœ ë‘¥ê¸€ê²Œ */
    }
    
    .show-more-tags {
        font-size: 0.9rem;
        margin: 0.1rem 0 0 0;
        padding: 0.4rem 0.6rem;
        border-radius: 20px !important;
        min-height: 2rem;
        box-sizing: border-box;
    }
    
    .post-tags {
        max-height: 4.2em; /* ëª¨ë°”ì¼ì—ì„œë„ ì¶©ë¶„í•œ ë†’ì´ */
        padding: 0.5rem 0;
    }
    
    .pagination {
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
    }
    
    .pagination a {
        width: 100%;
        max-width: 200px;
        text-align: center;
    }
}
</style>

<script>
function toggleTags(postId) {
    const tagsContainer = document.getElementById('post-tags-' + postId);
    const button = event.target.closest('.show-more-tags');
    const showText = button.querySelector('.show-text');
    const hideText = button.querySelector('.hide-text');
    
    if (tagsContainer.classList.contains('expanded')) {
        tagsContainer.classList.remove('expanded');
        showText.style.display = 'inline';
        hideText.style.display = 'none';
    } else {
        tagsContainer.classList.add('expanded');
        showText.style.display = 'none';
        hideText.style.display = 'inline';
    }
}

function adjustTagDisplay() {
    const allTags = document.querySelector('.all-tags');
    if (!allTags) return;
    
    const tagLinks = allTags.querySelectorAll('.tag-link:not(.more-tags)');
    const moreTagsLink = allTags.querySelector('.more-tags');
    const moreText = allTags.querySelector('.more-text');
    
    if (tagLinks.length === 0) return;
    
    let maxTags;
    const width = window.innerWidth;
    
    // ë””ë°”ì´ìŠ¤ë³„ íƒœê·¸ ê°œìˆ˜ ì„¤ì •
    if (width <= 768) {
        maxTags = 8; // ëª¨ë°”ì¼: 8ê°œ
    } else if (width <= 1024) {
        maxTags = 12; // íƒœë¸”ë¦¿: 12ê°œ
    } else {
        maxTags = 18; // ë°ìŠ¤í¬í†±: 18ê°œ
    }
    
    // íƒœê·¸ í‘œì‹œ/ìˆ¨ê¹€ ì²˜ë¦¬
    tagLinks.forEach((tag, index) => {
        if (index < maxTags) {
            tag.style.display = 'inline-flex';
        } else {
            tag.style.display = 'none';
        }
    });
    
    // ë”ë³´ê¸° ë§í¬ ì²˜ë¦¬
    if (moreTagsLink && tagLinks.length > maxTags) {
        const hiddenCount = tagLinks.length - maxTags;
        moreText.textContent = `+${hiddenCount}ê°œ ë”ë³´ê¸°`;
        moreTagsLink.style.display = 'inline-flex';
    } else if (moreTagsLink) {
        moreTagsLink.style.display = 'none';
    }
}

// í˜ì´ì§€ ë¡œë“œ ì‹œì™€ ì°½ í¬ê¸° ë³€ê²½ ì‹œ ì‹¤í–‰
document.addEventListener('DOMContentLoaded', adjustTagDisplay);
window.addEventListener('resize', adjustTagDisplay);

// íƒœê·¸ë³„ í¬ìŠ¤íŠ¸ í•„í„°ë§ í•¨ìˆ˜
function filterPostsByTag(tagName, clickedElement) {
    const allPosts = document.querySelectorAll('.post-entry');
    const allTagLinks = document.querySelectorAll('.tag-link:not(.more-tags):not(.show-all-posts)');
    const showAllButton = document.querySelector('.show-all-posts');
    
    // ëª¨ë“  íƒœê·¸ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
    allTagLinks.forEach(tag => tag.classList.remove('active'));
    
    // í´ë¦­ëœ íƒœê·¸ì— active í´ë˜ìŠ¤ ì¶”ê°€
    clickedElement.classList.add('active');
    
    // ì „ì²´ ë³´ê¸° ë²„íŠ¼ í‘œì‹œ
    if (showAllButton) {
        showAllButton.style.display = 'inline-flex';
        adjustTagDisplay(); // íƒœê·¸ í‘œì‹œ ì¬ì¡°ì •
    }
    
    let visibleCount = 0;
    
    // í¬ìŠ¤íŠ¸ í•„í„°ë§
    allPosts.forEach(post => {
        const postTags = post.getAttribute('data-tags');
        if (postTags && postTags.toLowerCase().includes(tagName.toLowerCase())) {
            post.style.display = 'block';
            visibleCount++;
        } else {
            post.style.display = 'none';
        }
    });
    
    // í¬ìŠ¤íŠ¸ í—¤ë” ì—…ë°ì´íŠ¸
    updatePostHeader(tagName, visibleCount);
    
    // í¬ìŠ¤íŠ¸ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤ (ë¶€ë“œëŸ½ê²Œ)
    const postHeader = document.querySelector('.post-header');
    if (postHeader) {
        postHeader.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

// ëª¨ë“  í¬ìŠ¤íŠ¸ ë³´ê¸° í•¨ìˆ˜
function showAllPosts(clickedElement) {
    const allPosts = document.querySelectorAll('.post-entry');
    const allTagLinks = document.querySelectorAll('.tag-link:not(.more-tags):not(.show-all-posts)');
    const showAllButton = document.querySelector('.show-all-posts');
    
    // ëª¨ë“  íƒœê·¸ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
    allTagLinks.forEach(tag => tag.classList.remove('active'));
    
    // ì „ì²´ ë³´ê¸° ë²„íŠ¼ ìˆ¨ê¸°ê¸°
    if (showAllButton) {
        showAllButton.style.display = 'none';
        adjustTagDisplay(); // íƒœê·¸ í‘œì‹œ ì¬ì¡°ì •
    }
    
    // ëª¨ë“  í¬ìŠ¤íŠ¸ í‘œì‹œ
    allPosts.forEach(post => {
        post.style.display = 'block';
    });
    
    // í¬ìŠ¤íŠ¸ í—¤ë”ë¥¼ ì›ë˜ëŒ€ë¡œ ë³µì›
    updatePostHeader(null, allPosts.length);
}

// í¬ìŠ¤íŠ¸ í—¤ë” ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updatePostHeader(tagName, count) {
    const postHeader = document.querySelector('.post-header h2');
    if (postHeader) {
        if (tagName) {
            postHeader.innerHTML = `Posts <span style="color: var(--primary-color, #b19cd9); font-size: 0.8em;">#${tagName} (${count})</span>`;
        } else {
            postHeader.textContent = 'Posts';
        }
    }
}

// í”„ë¡œì íŠ¸ë³„ í¬ìŠ¤íŠ¸ í•„í„°ë§ í•¨ìˆ˜
function filterPostsByProject(projectName) {
    const allPosts = document.querySelectorAll('.post-entry');
    const allTagLinks = document.querySelectorAll('.tag-link:not(.more-tags):not(.show-all-posts)');
    const showAllButton = document.querySelector('.show-all-posts');
    
    // ëª¨ë“  íƒœê·¸ì—ì„œ active í´ë˜ìŠ¤ ì œê±°
    allTagLinks.forEach(tag => tag.classList.remove('active'));
    
    // ì „ì²´ ë³´ê¸° ë²„íŠ¼ í‘œì‹œ
    if (showAllButton) {
        showAllButton.style.display = 'inline-flex';
        adjustTagDisplay();
    }
    
    let visibleCount = 0;
    
    // í¬ìŠ¤íŠ¸ í•„í„°ë§
    allPosts.forEach(post => {
        const postProject = post.getAttribute('data-project');
        if (postProject && postProject.toLowerCase() === projectName.toLowerCase()) {
            post.style.display = 'block';
            visibleCount++;
        } else {
            post.style.display = 'none';
        }
    });
    
    // í¬ìŠ¤íŠ¸ í—¤ë” ì—…ë°ì´íŠ¸
    updateProjectHeader(projectName, visibleCount);
    
    // í¬ìŠ¤íŠ¸ ì„¹ì…˜ìœ¼ë¡œ ìŠ¤í¬ë¡¤
    const postHeader = document.querySelector('.post-header');
    if (postHeader) {
        postHeader.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }
}

// í”„ë¡œì íŠ¸ë³„ í—¤ë” ì—…ë°ì´íŠ¸ í•¨ìˆ˜
function updateProjectHeader(projectName, count) {
    const postHeader = document.querySelector('.post-header h2');
    if (postHeader) {
        if (projectName) {
            postHeader.innerHTML = `Posts <span style="color: var(--primary-color, #b19cd9); font-size: 0.8em;">ğŸš€${projectName} (${count})</span>`;
        } else {
            postHeader.textContent = 'Posts';
        }
    }
}

// URL íŒŒë¼ë¯¸í„° í™•ì¸ ë° ìë™ í•„í„°ë§
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    const projectParam = urlParams.get('project');
    
    if (projectParam) {
        // URL ë””ì½”ë”©
        const projectName = decodeURIComponent(projectParam).replace(/-/g, ' ');
        filterPostsByProject(projectName);
    }
    
    // ê¸°ì¡´ íƒœê·¸ ë””ìŠ¤í”Œë ˆì´ ì¡°ì •
    adjustTagDisplay();
});
</script>
{{ end }}
